<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warehouse Management</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h2>Warehouse Management</h2>

        <!-- Tabs Navigation -->
        <ul class="nav nav-tabs" id="warehouseTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="inventory-tab" data-bs-toggle="tab" data-bs-target="#inventory" type="button" role="tab">Inventory</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders" type="button" role="tab">Orders</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="logs-tab" data-bs-toggle="tab" data-bs-target="#logs" type="button" role="tab">Logs</button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content mt-3" id="warehouseTabsContent">

            <!-- Inventory Tab -->
            <div class="tab-pane fade show active" id="inventory" role="tabpanel">
                <h3>Inventory</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            {% for col in inventory[0].keys() %}
                                <th>{{ col }}</th>
                            {% endfor %}
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in inventory %}
                        <tr>
                            {% for value in row.values() %}
                                <td>{{ value }}</td>
                            {% endfor %}
                            <td>
                                <form action="/edit" method="POST" class="d-inline">
                                    <input type="hidden" name="file_type" value="inventory">
                                    <input type="hidden" name="row_index" value="{{ loop.index0 }}">
                                    <button class="btn btn-warning btn-sm">Edit</button>
                                </form>
                                <form action="/delete" method="POST" class="d-inline">
                                    <input type="hidden" name="file_type" value="inventory">
                                    <input type="hidden" name="row_index" value="{{ loop.index0 }}">
                                    <button class="btn btn-danger btn-sm">Delete</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <!-- Add Inventory Item -->
                <h3>Add Inventory Item</h3>
                <form action="/add" method="POST" class="mb-3">
                    <input type="hidden" name="file_type" value="inventory">
                    {% for col in inventory[0].keys() %}
                        <input type="text" name="{{ col }}" placeholder="{{ col }}" required class="form-control mb-2">
                    {% endfor %}
                    <button type="submit" class="btn btn-success">Add Item</button>
                </form>
            </div>

            <!-- Orders Tab -->
            <div class="tab-pane fade" id="orders" role="tabpanel">
                <h3>Orders</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            {% for col in orders[0].keys() %}
                                <th>{{ col }}</th>
                            {% endfor %}
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in orders %}
                        <tr>
                            {% for value in row.values() %}
                                <td>{{ value }}</td>
                            {% endfor %}
                            <td>
                                <form action="/edit" method="POST" class="d-inline">
                                    <input type="hidden" name="file_type" value="orders">
                                    <input type="hidden" name="row_index" value="{{ loop.index0 }}">
                                    <button class="btn btn-warning btn-sm">Edit</button>
                                </form>
                                <form action="/delete" method="POST" class="d-inline">
                                    <input type="hidden" name="file_type" value="orders">
                                    <input type="hidden" name="row_index" value="{{ loop.index0 }}">
                                    <button class="btn btn-danger btn-sm">Delete</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <!-- Add Order -->
		<h3>Add Order</h3>
		<form action="/add" method="POST" class="mb-3">
		    <input type="hidden" name="file_type" value="orders">
		    
		    <label><strong>Order ID (Auto-generated)</strong></label>
		    <input type="text" name="Order ID" placeholder="Generated Automatically" disabled class="form-control mb-2">

		    <div id="order-items">
			<div class="order-item">
			    <label><strong>Select Product</strong></label>
			    <select name="Product" class="form-control mb-2">
				{% for item in inventory %}
				    <option value="{{ item['Product'] }}">{{ item['Product'] }}</option>
				{% endfor %}
			    </select>

			    <label><strong>Quantity</strong></label>
			    <input type="number" name="Qty" placeholder="Enter Quantity" required class="form-control mb-2">
			</div>
		    </div>

		    <!-- Button to Add More Products -->
		    <button type="button" class="btn btn-primary mb-2" onclick="addProduct()">Add Another Product</button>

		    <button type="submit" class="btn btn-success">Add Order</button>
		</form>

		<script>
		    function addProduct() {
			let newItem = document.createElement('div');
			newItem.classList.add('order-item');
			newItem.innerHTML = `
			    <label><strong>Select Product</strong></label>
			    <select name="Product" class="form-control mb-2">
				{% for item in inventory %}
				    <option value="{{ item['Product'] }}">{{ item['Product'] }}</option>
				{% endfor %}
			    </select>
			    <label><strong>Quantity</strong></label>
			    <input type="number" name="Qty" placeholder="Enter Quantity" required class="form-control mb-2">
			`;
			document.getElementById('order-items').appendChild(newItem);
		    }
		</script>

            </div>

            <!-- Logs Tab -->
            <div class="tab-pane fade" id="logs" role="tabpanel">
                <h3>Logs</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Order ID</th>
                            <th>Product</th>
                            <th>Shelf</th>
                            <th>Quantity Picked</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for log in logs %}
                        <tr>
                            <td>{{ log["Timestamp"] }}</td>
                            <td>{{ log["Order ID"] }}</td>
                            <td>{{ log["Product"] }}</td>
                            <td>{{ log["Shelf"] }}</td>
                            <td>{{ log["Quantity Picked"] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>
    </div>
    <footer class="text-center mt-4">
    <p>Created by <strong>Ayushi Arora</strong> (SDP Project)</p>
</footer>

</body>
</html>

